"use strict";(self.webpackChunktea_app=self.webpackChunktea_app||[]).push([[315],{315:(F,a,i)=>{i.r(a),i.d(a,{ProductsModule:()=>w});var c=i(6895),n=i(646),g=i(8505),t=i(8256),p=i(2340),h=i(529);let d=(()=>{class e{constructor(o){this.http=o}getProducts(o){return this.http.get(o?p.N.apiURL+"tea?search="+o:p.N.apiURL+"tea")}getProduct(o){return this.http.get(p.N.apiURL+"tea?id="+o)}}return e.\u0275fac=function(o){return new(o||e)(t.LFG(h.eN))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var m=i(3763);let f=(()=>{class e{transform(o,r){return o.length>r?o.slice(0,r)+"...":o}}return e.\u0275fac=function(o){return new(o||e)},e.\u0275pipe=t.Yjl({name:"textCut",type:e,pure:!0}),e})();const b=function(e){return["/catalog",e]};let C=(()=>{class e{constructor(){this.product={id:0,image:"",title:"",price:0,description:""}}ngOnInit(){}}return e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["product-card"]],inputs:{product:"product"},decls:12,vars:12,consts:[[1,"col"],[1,"card","text-black","rounded-1","h-100"],[1,"image-popup-no-margins",3,"routerLink","title"],[1,"card-img-top",3,"src","alt"],[1,"card-body","px-4","py-3"],[1,"card-title","fw-bold","mb-3"],[1,"card-text","mb-4"],[1,"col","btn","btn-primary","px-5","hvr-sink",3,"routerLink"]],template:function(o,r){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"a",2),t._UZ(3,"img",3),t.qZA(),t.TgZ(4,"div",4)(5,"h5",5),t._uU(6),t.qZA(),t.TgZ(7,"p",6),t._uU(8),t.ALo(9,"textCut"),t.qZA(),t.TgZ(10,"a",7),t._uU(11,"\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435"),t.qZA()()()()),2&o&&(t.xp6(2),t.s9C("routerLink",r.product.image),t.s9C("title",r.product.title),t.xp6(1),t.s9C("src",r.product.image,t.LSH),t.s9C("alt",r.product.title),t.xp6(3),t.Oqu(r.product.title),t.xp6(2),t.Oqu(t.xi3(9,7,r.product.description,65)),t.xp6(2),t.Q6J("routerLink",t.VKq(10,b,r.product.id)))},dependencies:[n.yS,f]}),e})();function v(e,u){1&e&&(t.TgZ(0,"div",8),t._uU(1,"\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"),t.qZA())}function x(e,u){if(1&e&&(t.TgZ(0,"h1",9),t._uU(1),t.qZA()),2&e){const o=t.oxw();t.xp6(1),t.hij("\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 \u043f\u043e\u0438\u0441\u043a\u0430 \u043f\u043e \u0437\u0430\u043f\u0440\u043e\u0441\u0443: ",o.inputValue,"")}}function y(e,u){1&e&&(t.TgZ(0,"h1",10),t._uU(1,"\u041d\u0430\u0448\u0438 \u0447\u0430\u0439\u043d\u044b\u0435 \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u0438"),t.qZA())}function P(e,u){1&e&&t._UZ(0,"product-card",11),2&e&&t.Q6J("product",u.$implicit)}function Z(e,u){1&e&&(t.TgZ(0,"div",12),t._UZ(1,"div",13),t.qZA())}const T=function(e){return{product:e}},A=[{path:"",component:(()=>{class e{constructor(o,r,s){this.productService=o,this.searchService=r,this.router=s,this.products=[],this.productsSubscription=null,this.searchSubscription=null,this.loading=!1,this.status=1,this.inputValue=""}ngOnInit(){this.getProducts(this.searchService.inputValue?this.searchService.inputValue:""),this.searchSubscription=this.searchService.searchSubject$.subscribe(o=>{this.loading=!0,this.getProducts(o)})}ngOnDestroy(){this.productsSubscription?.unsubscribe(),this.searchSubscription?.unsubscribe()}getProducts(o){this.loading=!0,this.productsSubscription=this.productService.getProducts(o).pipe((0,g.b)(()=>{this.loading=!1})).subscribe({next:r=>{o?r&&r.length>0?(this.products=r,this.status=2,this.inputValue=o,this.products.forEach(s=>{s.image=s.image.replace("http","https")})):(this.products=[],this.status=0):r&&r.length>0?(this.products=r,this.status=1):this.status=0},error:r=>{console.log(r),this.router.navigate(["/"])}})}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(d),t.Y36(m.o),t.Y36(n.F0))},e.\u0275cmp=t.Xpm({type:e,selectors:[["catalog-component"]],decls:8,vars:5,consts:[[1,"collections","py-3"],[1,"container"],["class","fs-2 fw-bold text-center",4,"ngIf"],["class","fs-2 fw-bold text-center mb-5",4,"ngIf"],["class","title fs-2 fw-bold text-center mb-5",4,"ngIf"],[1,"row","row-cols-1","row-cols-md-2","row-cols-lg-3","g-4"],[3,"product",4,"ngFor","ngForOf"],["class","loader-bg",4,"ngIf"],[1,"fs-2","fw-bold","text-center"],[1,"fs-2","fw-bold","text-center","mb-5"],[1,"title","fs-2","fw-bold","text-center","mb-5"],[3,"product"],[1,"loader-bg"],[1,"loader"]],template:function(o,r){1&o&&(t.TgZ(0,"div",0)(1,"div",1),t.YNc(2,v,2,0,"div",2),t.YNc(3,x,2,1,"h1",3),t.YNc(4,y,2,0,"h1",4),t.TgZ(5,"div",5),t.YNc(6,P,1,1,"product-card",6),t.qZA()(),t.YNc(7,Z,2,0,"div",7),t.qZA()),2&o&&(t.xp6(2),t.Q6J("ngIf",0===r.status),t.xp6(1),t.Q6J("ngIf",2===r.status),t.xp6(1),t.Q6J("ngIf",1===r.status),t.xp6(2),t.Q6J("ngForOf",r.products),t.xp6(1),t.Q6J("ngIf",r.loading))},dependencies:[c.sg,c.O5,C],styles:[".loader-bg[_ngcontent-%COMP%]{width:100%;height:100%;position:fixed;top:0;left:0;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,.5)}.loader[_ngcontent-%COMP%]{width:150px;height:150px;border:15px solid white;border-top:15px solid rgb(13,110,253);animation:spin 1s infinite linear;border-radius:50%}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]}),e})()},{path:":id",component:(()=>{class e{constructor(o,r,s){this.activatedRoute=o,this.productService=r,this.router=s,this.queryParamsSubscription=null,this.productSubscription=null,this.product={id:0,image:"",title:"",price:0,description:""}}ngOnInit(){this.queryParamsSubscription=this.activatedRoute.params.subscribe(o=>{o.id?this.productSubscription=this.productService.getProduct(+o.id).subscribe({next:r=>{this.product=r,this.product.image=this.product.image.replace("http","https")},error:r=>{console.log(r),this.router.navigate(["/"])}}):this.router.navigate(["/"])})}ngOnDestroy(){this.queryParamsSubscription?.unsubscribe(),this.productSubscription?.unsubscribe()}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(n.gz),t.Y36(d),t.Y36(n.F0))},e.\u0275cmp=t.Xpm({type:e,selectors:[["product-component"]],decls:14,vars:10,consts:[[1,"product"],[1,"container","d-flex","flex-column","flex-md-row","justify-content-center","align-items-center","py-3"],[1,"product-action","d-flex","flex-column","align-items-center"],[3,"routerLink","title"],[1,"product-img",3,"src","alt"],[1,"product-price","text-center"],["routerLink","/order",1,"btn","btn-primary","px-5","hvr-sink","align-self-center",3,"queryParams"],[1,"product-body","px-4","py-3"],[1,"product-title","fw-bold","mb-3"],[1,"product-text","mb-4"]],template:function(o,r){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"a",3),t._UZ(4,"img",4),t.qZA(),t.TgZ(5,"p",5),t._uU(6),t.qZA(),t.TgZ(7,"a",6),t._uU(8,"\u041a\u0443\u043f\u0438\u0442\u044c"),t.qZA()(),t.TgZ(9,"div",7)(10,"h5",8),t._uU(11),t.qZA(),t.TgZ(12,"p",9),t._uU(13),t.qZA()()()()),2&o&&(t.xp6(3),t.s9C("routerLink",r.product.image),t.s9C("title",r.product.title),t.xp6(1),t.s9C("src",r.product.image,t.LSH),t.s9C("alt",r.product.title),t.xp6(2),t.Oqu("\u0426\u0435\u043d\u0430: "+r.product.price+" \u0440\u0443\u0431./100 \u0433."),t.xp6(1),t.Q6J("queryParams",t.VKq(8,T,r.product.title)),t.xp6(4),t.Oqu(r.product.title),t.xp6(2),t.Oqu(r.product.description))},dependencies:[n.yS],styles:[".product-img[_ngcontent-%COMP%]{max-width:100%}.product-body[_ngcontent-%COMP%]{flex:0 0 70%}.product-text[_ngcontent-%COMP%]{text-align:justify}"]}),e})()}];let l=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[n.Bz.forChild(A),n.Bz]}),e})();var q=i(4466);let w=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[c.ez,q.m,n.Bz,l,l]}),e})()}}]);